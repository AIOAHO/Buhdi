{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from 'axios';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar isWeb = Platform.OS === 'web';\nvar baseURL = 'http://localhost:3000/api';\nvar api = axios.create({\n  baseURL: baseURL,\n  timeout: 50000\n});\napi.interceptors.request.use(function () {\n  var _ref = _asyncToGenerator(function* (config) {\n    var token = '';\n    if (isWeb) {\n      token = window.localStorage.getItem('jwtToken');\n    } else {\n      token = yield AsyncStorage.getItem('jwtToken');\n    }\n    console.log('Retrieved token:', token);\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n      console.log('Set Authorization header:', config.headers.Authorization);\n    }\n    return config;\n  });\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}(), function (error) {\n  return Promise.reject(error);\n});\napi.interceptors.request.use(function (request) {\n  console.log('Starting Request', JSON.stringify(request, null, 2));\n  return request;\n}, function (error) {\n  console.error('Request Error:', error);\n  return Promise.reject(error);\n});\napi.interceptors.response.use(function (response) {\n  console.log('Response:', JSON.stringify(response, null, 2));\n  return response;\n}, function (error) {\n  console.error('Response Error:', error);\n  return Promise.reject(error);\n});\nexport var postEnneagramResult = function () {\n  var _ref2 = _asyncToGenerator(function* (data) {\n    try {\n      var response = yield api.post('/enneagram-result', data);\n      return response.data;\n    } catch (error) {\n      console.error('Error sending Enneagram result:', error);\n      throw error;\n    }\n  });\n  return function postEnneagramResult(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport default api;","map":{"version":3,"names":["axios","Platform","AsyncStorage","isWeb","OS","baseURL","api","create","timeout","interceptors","request","use","_ref","_asyncToGenerator","config","token","window","localStorage","getItem","console","log","headers","Authorization","_x","apply","arguments","error","Promise","reject","JSON","stringify","response","postEnneagramResult","_ref2","data","post","_x2"],"sources":["/Users/kimlyonshernandez/CODE/budhi/Buhdi/Client/src/utils/api.ts"],"sourcesContent":["import axios, { AxiosRequestConfig, AxiosError, AxiosResponse } from 'axios';\nimport { Platform } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { EnneagramResultPayload } from '../types'; // Define this type according to your payload structure\n\n\n// Check if running in a web environment\nconst isWeb = Platform.OS === 'web';\n\n// Define the base URL for your backend API\nconst baseURL = 'http://localhost:3000/api';\n\n// Create an Axios instance with the base URL\nconst api = axios.create({\n  baseURL,\n  timeout: 50000,\n});\n\napi.interceptors.request.use(\n  async (config: AxiosRequestConfig) => {\n     let token: string | null = '';\n \n     if (isWeb) {\n       token = window.localStorage.getItem('jwtToken');\n     } else {\n       token = await AsyncStorage.getItem('jwtToken');\n     }\n \n     console.log('Retrieved token:', token);\n \n     if (token) {\n       config.headers.Authorization = `Bearer ${token}`;\n       console.log('Set Authorization header:', config.headers.Authorization);\n     }\n \n     return config;\n  },\n  (error: AxiosError) => Promise.reject(error)\n );\n\n// Interceptors for logging\napi.interceptors.request.use((request: AxiosRequestConfig) => {\n  console.log('Starting Request', JSON.stringify(request, null, 2));\n  return request;\n}, (error: AxiosError) => {\n  console.error('Request Error:', error);\n  return Promise.reject(error);\n});\n\napi.interceptors.response.use((response: AxiosResponse) => {\n  console.log('Response:', JSON.stringify(response, null, 2));\n  return response;\n}, (error: AxiosError) => {\n  console.error('Response Error:', error);\n  return Promise.reject(error);\n});\n\nexport const postEnneagramResult = async (data: EnneagramResultPayload) => {\n  try {\n    const response = await api.post('/enneagram-result', data);\n    return response.data;\n  } catch (error) {\n    console.error('Error sending Enneagram result:', error);\n    throw error;\n  }\n};\n\nexport default api;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAyD,OAAO;AAAC,OAAAC,QAAA;AAE7E,OAAOC,YAAY,MAAM,2CAA2C;AAKpE,IAAMC,KAAK,GAAGF,QAAQ,CAACG,EAAE,KAAK,KAAK;AAGnC,IAAMC,OAAO,GAAG,2BAA2B;AAG3C,IAAMC,GAAG,GAAGN,KAAK,CAACO,MAAM,CAAC;EACvBF,OAAO,EAAPA,OAAO;EACPG,OAAO,EAAE;AACX,CAAC,CAAC;AAEFF,GAAG,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAC1B,WAAOC,MAA0B,EAAK;IACnC,IAAIC,KAAoB,GAAG,EAAE;IAE7B,IAAIZ,KAAK,EAAE;MACTY,KAAK,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IACjD,CAAC,MAAM;MACLH,KAAK,SAASb,YAAY,CAACgB,OAAO,CAAC,UAAU,CAAC;IAChD;IAEAC,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEL,KAAK,CAAC;IAEtC,IAAIA,KAAK,EAAE;MACTD,MAAM,CAACO,OAAO,CAACC,aAAa,GAAI,UAASP,KAAM,EAAC;MAChDI,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEN,MAAM,CAACO,OAAO,CAACC,aAAa,CAAC;IACxE;IAEA,OAAOR,MAAM;EAChB,CAAC;EAAA,iBAAAS,EAAA;IAAA,OAAAX,IAAA,CAAAY,KAAA,OAAAC,SAAA;EAAA;AAAA,KACD,UAACC,KAAiB;EAAA,OAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAAA,CAC7C,CAAC;AAGFpB,GAAG,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAC,UAACD,OAA2B,EAAK;EAC5DS,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAES,IAAI,CAACC,SAAS,CAACpB,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EACjE,OAAOA,OAAO;AAChB,CAAC,EAAE,UAACgB,KAAiB,EAAK;EACxBP,OAAO,CAACO,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;EACtC,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CAAC;AAEFpB,GAAG,CAACG,YAAY,CAACsB,QAAQ,CAACpB,GAAG,CAAC,UAACoB,QAAuB,EAAK;EACzDZ,OAAO,CAACC,GAAG,CAAC,WAAW,EAAES,IAAI,CAACC,SAAS,CAACC,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EAC3D,OAAOA,QAAQ;AACjB,CAAC,EAAE,UAACL,KAAiB,EAAK;EACxBP,OAAO,CAACO,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;EACvC,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CAAC;AAEF,OAAO,IAAMM,mBAAmB;EAAA,IAAAC,KAAA,GAAApB,iBAAA,CAAG,WAAOqB,IAA4B,EAAK;IACzE,IAAI;MACF,IAAMH,QAAQ,SAASzB,GAAG,CAAC6B,IAAI,CAAC,mBAAmB,EAAED,IAAI,CAAC;MAC1D,OAAOH,QAAQ,CAACG,IAAI;IACtB,CAAC,CAAC,OAAOR,KAAK,EAAE;MACdP,OAAO,CAACO,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACvD,MAAMA,KAAK;IACb;EACF,CAAC;EAAA,gBARYM,mBAAmBA,CAAAI,GAAA;IAAA,OAAAH,KAAA,CAAAT,KAAA,OAAAC,SAAA;EAAA;AAAA,GAQ/B;AAED,eAAenB,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}